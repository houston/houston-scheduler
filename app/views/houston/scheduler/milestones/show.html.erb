<%= render partial: "projects/header", locals: {project: @project, postfix: @milestone.name} %>

<div id="houston_scheduler_view"><div>

<% content_for :javascripts do %>
<script type="text/javascript">
  $(function() {
    var tickets = <%=raw Houston::Scheduler::TicketPresenter.new(@tickets).to_json %>;
    
    Scheduler.tickets = new Scheduler.Tickets(tickets, {parse: true});
    
    $('#houston_scheduler_view').appendView(
      new Scheduler.ShowMilestoneView({
        project: {
          id: <%= @project.id %>,
          slug: <%=raw @project.slug.to_json %>,
          name: <%=raw @project.name.to_json %>,
          ticketTrackerName: <%=raw @project.ticket_tracker_name.to_json %> },
        tickets: Scheduler.tickets
      })
    );
  });
</script>
<% end %>
