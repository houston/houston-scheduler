<% content_for :title do %>
<h1 class="project-banner space-below">
  Edit Sprint
  
  <%= render partial: "projects/keyboard_shortcuts" %>
</h1>
<% end %>

<div id="houston_scheduler_view"></div>

<% content_for :javascripts do %>
<script type="text/javascript">
  $(function() {
    window.options = window.options || {};
    window.options.showEffort = false;
    $('#houston_scheduler_view').appendView(new Scheduler.EditSprintView({
      projects: <%= raw followed_projects.map { |project| {
        id: project.id,
        slug: project.slug,
        name: project.name
      } }.to_json %>,
      sprintId: <%= @sprint.try(:id).to_json %>,
      tickets: <%= raw Houston::Scheduler::SprintTicketPresenter.new(@sprint.tickets).to_json %>.map(function(ticket) {
        ticket.checkedOut = !!ticket.checkedOutBy;
        ticket.checkedOutByMe = ticket.checkedOutBy && (ticket.checkedOutBy.id == window.user.id);
        return new Scheduler.Ticket(ticket);
      })
    }));
  });
</script>
<% end %>
